@tailwind base;
@tailwind components;
@tailwind utilities;

/* Mobile-first responsive design optimizations */
@layer base {
  html {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Improved touch targets for mobile */
  button, a, input, select, textarea {
    min-height: 44px;
    min-width: 44px;
  }

  /* Better scrolling on mobile */
  html {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent zoom on input focus in iOS */
  @media screen and (max-width: 767px) {
    input[type="text"],
    input[type="email"],
    input[type="password"],
    input[type="number"],
    input[type="tel"],
    input[type="url"],
    input[type="date"],
    textarea,
    select {
      font-size: 16px !important;
    }
  }

  /* Safe area support for modern mobile devices */
  .safe-area-inset {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

@layer components {
  /* Mobile-optimized card styles */
  .mobile-card {
    @apply rounded-xl shadow-soft border border-gray-100 bg-white;
    transition: all 0.2s ease-in-out;
  }

  .mobile-card:hover {
    @apply shadow-medium -translate-y-0.5;
  }

  /* Mobile-optimized button styles */
  .mobile-btn {
    @apply min-h-[44px] px-4 py-3 rounded-lg font-medium text-sm;
    @apply active:scale-95 transition-transform duration-100;
  }

  /* Mobile navigation styles */
  .mobile-nav {
    @apply fixed bottom-0 left-0 right-0 z-50;
    @apply bg-white border-t border-gray-200;
    @apply safe-area-inset;
    padding-bottom: calc(env(safe-area-inset-bottom) + 0.5rem);
  }

  /* Touch-friendly form inputs */
  .mobile-input {
    @apply min-h-[44px] px-4 py-3 rounded-lg border border-gray-300;
    @apply focus:ring-2 focus:ring-blue-500 focus:border-transparent;
    @apply text-base; /* Prevents zoom on iOS */
  }

  /* Date input improvements */
  input[type="date"] {
    position: relative;
    z-index: 10;
    background: white;
  }

  /* Ensure date picker works on mobile */
  input[type="date"]::-webkit-calendar-picker-indicator {
    cursor: pointer;
    opacity: 1;
    position: absolute;
    right: 12px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 11;
  }

  input[type="date"]::-webkit-inner-spin-button,
  input[type="date"]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  /* Firefox date input improvements */
  input[type="date"]::-moz-focus-inner {
    border: 0;
  }

  /* Optimized text truncation for mobile */
  .mobile-truncate {
    @apply truncate xs:text-xs sm:text-sm;
  }

  .mobile-line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .mobile-line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Swipe gestures support */
  .swipe-container {
    @apply overflow-x-auto;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .swipe-container::-webkit-scrollbar {
    display: none;
  }

  .swipe-item {
    scroll-snap-align: start;
    flex-shrink: 0;
  }
}

@layer utilities {
  /* Mobile-first spacing utilities */
  .space-mobile {
    @apply space-y-3 xs:space-y-4 sm:space-y-6;
  }

  .padding-mobile {
    @apply p-4 xs:p-6 sm:p-8;
  }

  /* Text size utilities for mobile */
  .text-mobile-xs { @apply text-xs xs:text-sm; }
  .text-mobile-sm { @apply text-sm xs:text-base; }
  .text-mobile-base { @apply text-base xs:text-lg; }
  .text-mobile-lg { @apply text-lg xs:text-xl; }

  /* Grid utilities optimized for mobile */
  .grid-mobile-1 {
    @apply grid-cols-1 xs:grid-cols-2 sm:grid-cols-3 lg:grid-cols-4;
  }

  .grid-mobile-cards {
    @apply grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 sm:gap-4;
  }

  /* Flex utilities for mobile */
  .flex-mobile-column {
    @apply flex flex-col xs:flex-row;
  }

  .flex-mobile-wrap {
    @apply flex flex-wrap xs:flex-nowrap;
  }

  /* Hide scrollbar utility */
  .scrollbar-hide {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}